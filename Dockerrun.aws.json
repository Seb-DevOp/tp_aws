{
    "AWSEBDockerrunVersion": 2,
    "containerDefinitions": [
        {
            "AWSEBDockerrunVersion": 2,
            "containerDefinitions": [
              {
                "name": "nginx",
                "image": "nginx:1.21",
                "memory": 256,
                "essential": true,
                "portMappings": [
                  {
                    "hostPort": 8000,
                    "containerPort": 80
                  }
                ],
                "volumes": [
                  {
                    "host": {
                      "sourcePath": "/var/app/current/nginx.conf"
                    },
                    "container": {
                      "path": "/etc/nginx/conf.d/default.conf"
                    }
                  },
                  {
                    "host": {
                      "sourcePath": "/var/app/current"
                    },
                    "container": {
                      "path": "/var/www/html"
                    }
                  }
                ],
                "dependsOn": [
                  {
                    "containerName": "app",
                    "condition": "START"
                  }
                ]
              },
              {
                "name": "app",
                "image": "php:8.2-fpm", 
                "memory": 256,
                "essential": true,
                "portMappings": [],
                "volumes": [
                  {
                    "host": {
                      "sourcePath": "/var/app/current"
                    },
                    "container": {
                      "path": "/var/www/html"
                    }
                  }
                ],
                "dependsOn": [
                  {
                    "containerName": "mysql",
                    "condition": "START"
                  }
                ]
              },
              {
                "name": "mysql",
                "image": "mysql:8.0",
                "memory": 256,
                "essential": false,
                "environment": [
                  {
                    "name": "MYSQL_DATABASE",
                    "value": "crm"
                  },
                  {
                    "name": "MYSQL_ROOT_PASSWORD",
                    "value": "password"
                  }
                ],
                "portMappings": [
                  {
                    "hostPort": 3306,
                    "containerPort": 3306
                  }
                ],
                "volumes": [
                  {
                    "host": {
                      "sourcePath": "/var/lib/mysql"
                    },
                    "container": {
                      "path": "/var/lib/mysql"
                    }
                  }
                ]
              },
              {
                "name": "phpmyadmin",
                "image": "phpmyadmin/phpmyadmin:5.1",
                "memory": 256,
                "essential": false,
                "environment": [
                  {
                    "name": "PMA_HOST",
                    "value": "mysql"
                  },
                  {
                    "name": "PMA_USER",
                    "value": "root"
                  },
                  {
                    "name": "PMA_PASSWORD",
                    "value": "password"
                  }
                ],
                "portMappings": [
                  {
                    "hostPort": 8080,
                    "containerPort": 80
                  }
                ],
                "dependsOn": [
                  {
                    "containerName": "mysql",
                    "condition": "START"
                  }
                ]
              },
              {
                "name": "mailhog",
                "image": "mailhog/mailhog:v1.0.1",
                "memory": 128,
                "essential": false,
                "portMappings": [
                  {
                    "hostPort": 1025,
                    "containerPort": 1025
                  },
                  {
                    "hostPort": 8025,
                    "containerPort": 8025
                  }
                ]
              }
            ]
          }
          